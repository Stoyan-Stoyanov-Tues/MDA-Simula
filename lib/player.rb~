require './sprite'

class Player < Sprite
	attr_accessor :camera_x, :camera_y
	def initialize(do_collision, solid, virtual_model, pos_x, pos_y, animations, range_attack_image = 'bullet.png')
		super(do_collision, solid, virtual_model, pos_x, pos_y, animations, range_attack_image = 'bullet.png')
		@camera_x = 0
		@camera_y = 0
	end
	def command?(key)
		$window.button_down?(key)   
	end
	def left
		@pos_x-=@velocity_x
		@camera_x+=@velocity_x
		look(:left)
	end
	
	def right
		@pos_x+=@velocity_x
		@camera_x-=@velocity_x
		look(:right)
	end
	
	def up
		@pos_y-=@velocity_y
		@camera_y+=@velocity_y
	end
	
	def down
		@pos_y+=@velocity_y
		@camera_y-=@velocity_y
	end
	
	def destroy
		$map.delete(self) if $map.outside?(self)
		
		image = Gosu::Image.new(self, 'media/game_over.png', false)
		model = Constructor::create_virtual_model(game_over)
		game_over = Tile.new(false, false, model, 400, 300)
		$map.add(game_over)
	end
end
